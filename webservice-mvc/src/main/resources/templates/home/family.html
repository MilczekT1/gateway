<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Family</title>
</head>
<body>
    <center>
        <p>[[${#httpServletRequest.remoteUser}]]!</p>
        <p>Menu:</p>
        <form th:action="@{/logout}" method="post">
            <input type="submit" value="Sign Out"/>
        </form>
            <a th:href="@{/home/family}">Zarządzanie rodziną</a> <br/>
        <hr/>
    </center>

    <p>Family Name: <span th:utext="${familyObject.title}"></span></p>
    <p>Owner Id: <span th:utext="${familyObject.ownerId}"></span></p>
    <p>Budget Id: <span th:utext="${familyObject.budgetId}"></span></p>
    <p>Max members: <span th:utext="${familyObject.maxMembers}"></span></p>
    <p>Max Jars: <span th:utext="${familyObject.maxJars}"></span></p>
    <p>Email notifications: <span th:utext="${familyObject.emailNotificationsEnabled}"></span></p>
    <p>Phone notifications: <span th:utext="${familyObject.phoneNotificationsEnabled}"></span></p>

    <center>
        <hr/>
        <p>Pending invitations</p>
        <table>
            <th:block th:each="invitation : ${invitationsList}">
                <tr>
                    <!--<td th:text="${invitation.id}"></td>-->
                    <td th:text="${invitation.email}"></td>
                    <td>
                        <form th:action="@{/home/family/remove}" method="POST" >
                            <input type="hidden" th:name="invitationId" th:value="${invitation.id}"/>
                            <button type="submit" th:text="#{familyCreationForm.removeInvitationButton}"></button>
                        </form>
                    </td>
                    <td>
                        <form th:action="@{/home/family/invite-to-family/resend-invitation}" method="POST" >
                            <input type="hidden" th:name="invitationId" th:value="${invitation.id}"/>
                            <button type="submit" th:text="#{familyCreationForm.resendInvitationButton}"></button>
                        </form>
                    </td>
                </tr>
            </th:block>
        </table>
        <hr/>

        <!--TODO: if user is owner-->
        <p>Invite:</p>
        <form th:action="@{/home/family/invite-to-family}" th:object="${familyObject}" method=POST>
            <p>Email:</p>
            <input type="text" th:name="newMemberEmail"/></br>
            <input type="hidden" th:field="*{id}" th:value="${familyObject.id}"/>
            <input type="hidden" th:field="*{ownerId}" th:value="${familyObject.ownerId}"/>
            <input type="hidden" th:field="*{budgetId}" th:value="${familyObject.budgetId}"/>
            <input type="hidden" th:field="*{title}" th:value="${familyObject.title}"/>
            <input type="hidden" th:field="*{maxMembers}" th:value="${familyObject.maxMembers}"/>
            <input type="hidden" th:field="*{maxJars}" th:value="${familyObject.maxJars}"/>
            <input type="hidden" th:field="*{emailNotificationsEnabled}" th:value="${familyObject.emailNotificationsEnabled}"/>
            <input type="hidden" th:field="*{phoneNotificationsEnabled}" th:value="${familyObject.phoneNotificationsEnabled}"/>
            <input type="submit" value="invite"/>
        </form>
        <!--TODO: if user is owner-->
    </center>
    <hr/>

</body>
</html>